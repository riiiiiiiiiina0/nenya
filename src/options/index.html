<!DOCTYPE html>
<html lang="en" data-theme="light">

<head>
  <meta charset="utf-8">
  <title>Nenya - Options</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="color-scheme" content="light dark">
  <link rel="stylesheet" href="../libs/daisyui@5.css">
  <link rel="stylesheet" href="../libs/daisyui@5-themes.css">
  <link rel="stylesheet" href="../libs/toastify.min.css">
  <script src="../libs/tailwindcss@4.js"></script>
  <script src="../libs/toastify-js.js"></script>
  <script src="../libs/dayjs.min.js"></script>
  <script src="../libs/ace.js"></script>
  <script src="../libs/ace-theme-monokai.js"></script>
  <script src="../libs/ace-mode-javascript.js"></script>
  <script src="../libs/ace-mode-css.js"></script>
  <script src="../libs/ace-ext-language_tools.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');

    :root {
      --primary-color: #7c3aed;
      --primary-light: #8b5cf6;
      --primary-dark: #6d28d9;
      --emerald: #10b981;
      --sidebar-width: 280px;
    }

    body {
      font-family: 'Inter', system-ui, sans-serif;
    }

    /* Sidebar styling */
    .options-sidebar {
      width: var(--sidebar-width);
      background: var(--color-base-100);
      border-right: 1px solid var(--color-base-300);
      position: fixed;
      height: 100vh;
      overflow-y: auto;
      padding: 1.5rem;
      z-index: 20;
    }

    .options-main {
      margin-left: var(--sidebar-width);
      min-height: 100vh;
      padding: 2rem 3rem;
      width: calc(100vw - var(--sidebar-width));
      background: var(--color-base-200);
    }

    .options-main>div {
      width: 100%;
      max-width: 56rem;
    }

    /* Navigation styling */
    .nav-item {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.75rem 1rem;
      border-radius: 1rem;
      cursor: pointer;
      transition: all 0.2s ease;
      color: color-mix(in oklch, var(--color-base-content) 60%, transparent);
    }

    .nav-item:hover {
      background: var(--color-base-200);
      color: var(--color-base-content);
    }

    .nav-item.active,
    a.nav-item.active,
    .options-sidebar .nav-item.active {
      background: #7c3aed33 !important;
      color: #7c3aed !important;
      font-weight: 600;
      border-radius: 0.75rem;
      border-left: 3px solid #7c3aed;
    }

    .nav-item .nav-icon {
      width: 20px;
      height: 20px;
      flex-shrink: 0;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      line-height: 1;
    }

    .nav-item.active .nav-icon {
      color: var(--color-primary);
    }

    .nav-group-title {
      font-size: 0.7rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: color-mix(in oklch, var(--color-base-content) 40%, transparent);
      padding: 0.5rem 1rem;
      margin-top: 1.5rem;
    }

    .nav-group-title:first-child {
      margin-top: 0;
    }

    /* Card styling */
    .options-card {
      background: var(--color-base-100);
      border-radius: 1.5rem;
      padding: 2rem;
      box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.05);
      border: 1px solid color-mix(in oklch, var(--color-base-300) 50%, transparent);
      width: 100%;
    }

    /* Section header */
    .section-header {
      margin-bottom: 2rem;
    }

    .section-title {
      font-size: 1.875rem;
      font-weight: 700;
      color: var(--color-base-content);
      letter-spacing: -0.025em;
    }

    .section-description {
      color: color-mix(in oklch, var(--color-base-content) 60%, transparent);
      margin-top: 0.5rem;
      font-size: 1rem;
    }

    /* Input styling */
    .nenya-input {
      width: 100%;
      padding: 0.875rem 1.25rem;
      border-radius: 1rem;
      background: var(--color-base-200);
      border: 1px solid var(--color-base-300);
      color: var(--color-base-content);
      font-size: 0.875rem;
      transition: all 0.2s ease;
    }

    .nenya-input:focus {
      outline: none;
      background: var(--color-base-100);
      border-color: var(--color-primary);
      box-shadow: 0 0 0 4px color-mix(in oklch, var(--color-primary) 10%, transparent);
    }

    .nenya-input::placeholder {
      color: color-mix(in oklch, var(--color-base-content) 40%, transparent);
    }

    /* Button styling */
    .nenya-btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      padding: 0.75rem 1.5rem;
      border-radius: 1rem;
      font-weight: 500;
      transition: all 0.2s ease;
      cursor: pointer;
      border: none;
    }

    .nenya-btn:active {
      transform: scale(0.95);
    }

    .nenya-btn-primary {
      background: var(--color-primary);
      color: var(--color-primary-content);
      box-shadow: 0 4px 14px color-mix(in oklch, var(--color-primary) 30%, transparent);
    }

    .nenya-btn-primary:hover {
      background: color-mix(in oklch, var(--color-primary) 90%, transparent);
      box-shadow: 0 6px 20px color-mix(in oklch, var(--color-primary) 40%, transparent);
    }

    .nenya-btn-secondary {
      background: var(--color-base-100);
      color: color-mix(in oklch, var(--color-base-content) 70%, transparent);
      border: 1px solid var(--color-base-300);
    }

    .nenya-btn-secondary:hover {
      background: var(--color-base-200);
      color: var(--color-base-content);
    }

    .nenya-btn-danger {
      background: color-mix(in oklch, var(--color-error) 10%, transparent);
      color: var(--color-error);
    }

    .nenya-btn-danger:hover {
      background: color-mix(in oklch, var(--color-error) 15%, transparent);
    }

    .nenya-btn-ghost {
      background: transparent;
      color: color-mix(in oklch, var(--color-base-content) 60%, transparent);
    }

    .nenya-btn-ghost:hover {
      background: var(--color-base-200);
      color: var(--color-base-content);
    }

    .nenya-btn-vibrant {
      background: linear-gradient(135deg, #ec4899, #8b5cf6);
      color: white;
      box-shadow: 0 4px 14px rgb(236 72 153 / 0.3);
    }

    .nenya-btn-vibrant:hover {
      box-shadow: 0 6px 20px rgb(236 72 153 / 0.4);
    }

    /* Toggle styling */
    .nenya-toggle {
      position: relative;
      width: 3.5rem;
      height: 2rem;
      border-radius: 1rem;
      background: var(--color-base-300);
      cursor: pointer;
      transition: background 0.3s ease;
      flex-shrink: 0;
    }

    .nenya-toggle::after {
      content: '';
      position: absolute;
      top: 0.25rem;
      left: 0.25rem;
      width: 1.5rem;
      height: 1.5rem;
      border-radius: 50%;
      background: white;
      box-shadow: 0 2px 4px rgb(0 0 0 / 0.1);
      transition: transform 0.3s ease;
    }

    .nenya-toggle.active {
      background: var(--emerald);
    }

    .nenya-toggle.active::after {
      transform: translateX(1.5rem);
    }

    /* Badge styling */
    .nenya-badge {
      padding: 0.25rem 0.75rem;
      border-radius: 9999px;
      font-size: 0.7rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .nenya-badge-green {
      background: color-mix(in oklch, var(--color-success) 15%, transparent);
      color: var(--color-success);
    }

    .nenya-badge-blue {
      background: color-mix(in oklch, var(--color-info) 15%, transparent);
      color: var(--color-info);
    }

    .nenya-badge-violet {
      background: color-mix(in oklch, var(--color-primary) 15%, transparent);
      color: var(--color-primary);
    }

    .nenya-badge-yellow {
      background: color-mix(in oklch, var(--color-warning) 15%, transparent);
      color: var(--color-warning);
    }

    .nenya-badge-red {
      background: color-mix(in oklch, var(--color-error) 15%, transparent);
      color: var(--color-error);
    }

    /* Rule item styling */
    .rule-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 1rem 1.25rem;
      background: var(--color-base-100);
      border: 1px solid var(--color-base-300);
      border-radius: 1rem;
      transition: all 0.2s ease;
      cursor: pointer;
    }

    .rule-item:hover {
      border-color: color-mix(in oklch, var(--color-primary) 30%, transparent);
      box-shadow: 0 4px 12px color-mix(in oklch, var(--color-base-300) 50%, transparent);
    }

    .rule-item.active {
      border-color: var(--color-primary);
      background: color-mix(in oklch, var(--color-primary) 5%, transparent);
    }

    .rule-icon {
      width: 2.5rem;
      height: 2.5rem;
      border-radius: 0.75rem;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }

    /* Empty state */
    .empty-state {
      padding: 2rem;
      text-align: center;
      border: 2px dashed var(--color-base-300);
      border-radius: 1rem;
      color: color-mix(in oklch, var(--color-base-content) 50%, transparent);
    }

    /* Animate in */
    .animate-in {
      animation: fadeInSlideUp 0.4s ease-out;
    }

    @keyframes fadeInSlideUp {
      from {
        opacity: 0;
        transform: translateY(12px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Form label */
    .form-label {
      display: block;
      font-size: 0.7rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: color-mix(in oklch, var(--color-base-content) 50%, transparent);
      margin-bottom: 0.5rem;
    }

    /* Info box */
    .info-box {
      display: flex;
      gap: 0.75rem;
      padding: 1rem;
      background: color-mix(in oklch, var(--color-info) 10%, transparent);
      border: 1px solid color-mix(in oklch, var(--color-info) 20%, transparent);
      border-radius: 1rem;
      color: var(--color-info);
      font-size: 0.875rem;
    }

    /* Details panel */
    .details-panel {
      background: var(--color-base-200);
      border: 1px solid var(--color-base-300);
      border-radius: 1rem;
      padding: 1.5rem;
    }

    /* Ace editor styling */
    #customCodeCSSInput .ace_editor,
    #customCodeJSInput .ace_editor {
      font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', monospace;
    }

    #customCodeCSSInput .ace_gutter,
    #customCodeJSInput .ace_gutter {
      background-color: var(--color-base-200);
      color: color-mix(in oklch, var(--color-base-content) 50%, transparent);
    }

    #customCodeCSSInput .ace_gutter-active-line,
    #customCodeJSInput .ace_gutter-active-line {
      background-color: var(--color-base-300);
    }

    /* Hide sections by default */
    .section-content {
      display: none;
      width: 100%;
    }

    .section-content.active {
      display: block;
      width: 100%;
    }

    .section-content .animate-in {
      width: 100%;
    }

    /* Logo styling */
    .logo-container {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.5rem;
      margin-bottom: 2rem;
    }

    .logo-icon {
      width: 2.5rem;
      height: 2.5rem;
      border-radius: 0.75rem;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: 700;
      font-size: 1.25rem;
    }

    .logo-text {
      font-size: 1.5rem;
      font-weight: 700;
      letter-spacing: -0.025em;
      color: var(--color-base-content);
    }

    /* Scrollbar styling */
    .options-sidebar::-webkit-scrollbar {
      width: 6px;
    }

    .options-sidebar::-webkit-scrollbar-track {
      background: transparent;
    }

    .options-sidebar::-webkit-scrollbar-thumb {
      background: color-mix(in oklch, var(--color-base-content) 10%, transparent);
      border-radius: 3px;
    }

    .options-sidebar::-webkit-scrollbar-thumb:hover {
      background: color-mix(in oklch, var(--color-base-content) 20%, transparent);
    }

    /* Floating backup bar */
    .options-floating-bar {
      position: fixed;
      right: 1rem;
      bottom: 1rem;
      z-index: 50;
      background: var(--color-base-100);
      border: 1px solid var(--color-base-300);
      box-shadow: 0 8px 20px rgb(0 0 0 / 0.1);
      border-radius: 1rem;
      padding: 0.75rem;
      width: 140px;
    }

    .options-floating-status {
      font-size: 0.6rem;
      color: color-mix(in oklch, var(--color-base-content) 30%, transparent);
      margin-bottom: 0.6rem;
      text-align: center;
    }

    .options-floating-actions {
      display: flex;
      flex-direction: column;
      gap: 0.4rem;
    }

    .options-floating-actions .floating-btn {
      width: 100%;
      min-height: 2.25rem;
    }
  </style>
</head>

<body class="bg-base-300">
  <div id="app" class="flex min-h-screen">
    <!-- Sidebar -->
    <aside class="options-sidebar">
      <div class="logo-container">
        <div class="logo-icon">
          <img src="../../assets/icons/icon-48x48.png" alt="Extension icon"
            style="width:2.5rem; height:2.5rem; border-radius:0.75rem;">
        </div>
        <span class="logo-text">Nenya</span>
      </div>

      <nav id="options-nav">
        <div class="nav-group-title">General</div>
        <a href="#mirror-heading" class="nav-item nav-link" data-section="mirror-heading">
          <span class="nav-icon text-lg">‚òÅÔ∏è</span>
          <span>Cloud Bookmarks</span>
        </a>
        <a href="#notifications-heading" class="nav-item nav-link" data-section="notifications-heading">
          <span class="nav-icon text-lg">üîî</span>
          <span>Notifications</span>
        </a>
        <a href="#screenshot-settings-heading" class="nav-item nav-link" data-section="screenshot-settings-heading">
          <span class="nav-icon text-lg">üì∏</span>
          <span>Screenshot Settings</span>
        </a>

        <div class="nav-group-title">Interface</div>
        <a href="#pinned-shortcuts-heading" class="nav-item nav-link" data-section="pinned-shortcuts-heading">
          <span class="nav-icon text-lg">üìå</span>
          <span>Pinned Shortcuts</span>
        </a>
        <a href="#dark-mode-heading" class="nav-item nav-link" data-section="dark-mode-heading">
          <span class="nav-icon text-lg">üåô</span>
          <span>Dark Mode</span>
        </a>
        <a href="#bright-mode-heading" class="nav-item nav-link" data-section="bright-mode-heading">
          <span class="nav-icon text-lg">‚òÄÔ∏è</span>
          <span>Bright Mode</span>
        </a>

        <div class="nav-group-title">Content Control</div>
        <a href="#auto-reload-heading" class="nav-item nav-link" data-section="auto-reload-heading">
          <span class="nav-icon text-lg">üîÑ</span>
          <span>Auto Reload Rules</span>
        </a>
        <a href="#highlight-text-heading" class="nav-item nav-link" data-section="highlight-text-heading">
          <span class="nav-icon text-lg">‚ú®</span>
          <span>Highlight Text</span>
        </a>
        <a href="#video-enhancements-heading" class="nav-item nav-link" data-section="video-enhancements-heading">
          <span class="nav-icon text-lg">üé¨</span>
          <span>Video Enhancements</span>
        </a>
        <a href="#block-elements-heading" class="nav-item nav-link" data-section="block-elements-heading">
          <span class="nav-icon text-lg">üö´</span>
          <span>Block Elements</span>
        </a>
        <a href="#custom-code-heading" class="nav-item nav-link" data-section="custom-code-heading">
          <span class="nav-icon text-lg">üíª</span>
          <span>Custom JS CSS</span>
        </a>

        <div class="nav-group-title">Automation</div>
        <a href="#url-process-rules-heading" class="nav-item nav-link" data-section="url-process-rules-heading">
          <span class="nav-icon text-lg">üîó</span>
          <span>URL Process Rules</span>
        </a>
        <a href="#auto-google-login-heading" class="nav-item nav-link" data-section="auto-google-login-heading">
          <span class="nav-icon text-lg">üîë</span>
          <span>Auto Google Login</span>
        </a>
        <a href="#llm-prompts-heading" class="nav-item nav-link" data-section="llm-prompts-heading">
          <span class="nav-icon text-lg">üí¨</span>
          <span>LLM Prompts</span>
        </a>

        <div class="nav-group-title">System</div>
        <a href="#debug-heading" class="nav-item nav-link" data-section="debug-heading">
          <span class="nav-icon text-lg">üêõ</span>
          <span>Debug</span>
        </a>
      </nav>
    </aside>

    <!-- Main Content -->
    <main class="options-main">
      <div>

        <!-- Cloud Bookmarks Section -->
        <section class="section-content" data-section="mirror-heading" id="section-mirror">
          <div class="animate-in">
            <div class="section-header">
              <h1 id="mirror-heading" class="section-title">Cloud Bookmarks</h1>
              <p class="section-description">Mirror your collections and bookmarks from the cloud to your browser.</p>
            </div>

            <div class="options-card">
              <div class="flex items-center gap-4 mb-6">
                <div
                  class="w-14 h-14 bg-blue-100 dark:bg-blue-900/30 rounded-2xl flex items-center justify-center text-blue-600">
                  <svg class="w-7 h-7" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path
                      d="M17.5 19H17a5 5 0 0 0 0-10 4.5 4.5 0 1 0-7.02-.55C8.61 7.6 7.1 8 5.5 8A4.5 4.5 0 0 0 5 17h.5" />
                    <path d="M18 10a4 4 0 0 0-1.2-2.7" />
                  </svg>
                </div>
                <div>
                  <h3 class="text-lg font-bold">Raindrop.io</h3>
                  <div id="statusMessage" class="flex items-center gap-2 text-sm text-base-content/70" role="status"
                    aria-live="polite"></div>
                </div>
              </div>

              <div class="space-y-4">
                <div>
                  <label class="form-label">Provider</label>
                  <select id="providerSelect" class="nenya-input"></select>
                </div>
                <p id="providerDescription" class="text-sm text-base-content/60"></p>
              </div>

              <div id="rootFolderSection" class="space-y-4 border-t border-base-300 pt-6 mt-6" hidden>
                <div>
                  <h3 class="text-lg font-semibold mb-1">Root bookmark folder</h3>
                  <p class="text-sm text-base-content/60">Choose where the mirror folder lives and what it is called.
                  </p>
                </div>
                <div>
                  <label class="form-label">Parent folder</label>
                  <select id="rootFolderParentSelect" class="nenya-input"></select>
                </div>
                <div>
                  <label class="form-label">Folder name</label>
                  <input id="rootFolderNameInput" class="nenya-input" type="text" autocomplete="off" required>
                </div>
                <div class="flex justify-end">
                  <button id="rootFolderSaveButton" class="nenya-btn nenya-btn-secondary" type="button" disabled>Save
                    changes</button>
                </div>
              </div>

              <div class="flex flex-wrap gap-3 mt-6 pt-6 border-t border-base-300">
                <button id="connectButton" class="nenya-btn nenya-btn-primary" type="button" hidden>Connect</button>
                <button id="disconnectButton" class="nenya-btn nenya-btn-danger" type="button" hidden>Logout</button>
                <div class="flex gap-3 ml-auto">
                  <button id="pullMirrorButton" class="nenya-btn nenya-btn-vibrant" type="button" hidden>Pull
                    Now</button>
                  <button id="resetMirrorButton" class="nenya-btn nenya-btn-secondary" type="button" hidden>Reset
                    &amp; Re-pull</button>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Notifications Section -->
        <section class="section-content" data-section="notifications-heading" id="section-notifications">
          <div class="animate-in">
            <div class="section-header">
              <h1 id="notifications-heading" class="section-title">Notifications</h1>
              <p class="section-description">Decide which alerts the extension should show.</p>
            </div>

            <div class="options-card">
              <div class="space-y-6">
                <!-- Global -->
                <div class="flex items-center justify-between pb-6 border-b border-base-300">
                  <div>
                    <h3 class="text-lg font-bold">Global Notifications</h3>
                    <p class="text-sm text-base-content/60 mt-1">Enable or disable all notifications.</p>
                  </div>
                  <input id="notificationGlobalToggle" class="toggle toggle-primary" type="checkbox">
                </div>

                <!-- Bookmark Management -->
                <div class="space-y-3">
                  <h3 class="text-xs font-bold text-base-content/40 uppercase tracking-wider">Bookmark Management</h3>
                  <label
                    class="flex items-center justify-between p-4 bg-base-200 rounded-2xl cursor-pointer hover:bg-base-300 transition-colors">
                    <span class="font-medium">Enable bookmark notifications</span>
                    <input id="notificationBookmarkToggle" class="toggle toggle-primary" type="checkbox">
                  </label>
                  <div id="notificationBookmarkGroup" class="space-y-2 pl-4">
                    <label
                      class="flex items-center justify-between p-3 bg-base-200 rounded-xl cursor-pointer hover:bg-base-300 transition-colors">
                      <span>Pull finished</span>
                      <input id="notificationBookmarkPullToggle" class="toggle toggle-sm toggle-secondary"
                        type="checkbox">
                    </label>
                    <label
                      class="flex items-center justify-between p-3 bg-base-200 rounded-xl cursor-pointer hover:bg-base-300 transition-colors">
                      <span>Saved to Unsorted</span>
                      <input id="notificationBookmarkUnsortedToggle" class="toggle toggle-sm toggle-secondary"
                        type="checkbox">
                    </label>
                  </div>
                </div>

                <!-- Project Management -->
                <div class="space-y-3">
                  <h3 class="text-xs font-bold text-base-content/40 uppercase tracking-wider">Project Management</h3>
                  <label
                    class="flex items-center justify-between p-4 bg-base-200 rounded-2xl cursor-pointer hover:bg-base-300 transition-colors">
                    <span class="font-medium">Enable project notifications</span>
                    <input id="notificationProjectToggle" class="toggle toggle-primary" type="checkbox">
                  </label>
                  <div id="notificationProjectGroup" class="space-y-2 pl-4">
                    <label
                      class="flex items-center justify-between p-3 bg-base-200 rounded-xl cursor-pointer hover:bg-base-300 transition-colors">
                      <span>Save project</span>
                      <input id="notificationProjectSaveToggle" class="toggle toggle-sm toggle-secondary"
                        type="checkbox">
                    </label>
                    <label
                      class="flex items-center justify-between p-3 bg-base-200 rounded-xl cursor-pointer hover:bg-base-300 transition-colors">
                      <span>Add tabs to project</span>
                      <input id="notificationProjectAddToggle" class="toggle toggle-sm toggle-secondary"
                        type="checkbox">
                    </label>
                    <label
                      class="flex items-center justify-between p-3 bg-base-200 rounded-xl cursor-pointer hover:bg-base-300 transition-colors">
                      <span>Replace project items</span>
                      <input id="notificationProjectReplaceToggle" class="toggle toggle-sm toggle-secondary"
                        type="checkbox">
                    </label>
                    <label
                      class="flex items-center justify-between p-3 bg-base-200 rounded-xl cursor-pointer hover:bg-base-300 transition-colors">
                      <span>Delete project</span>
                      <input id="notificationProjectDeleteToggle" class="toggle toggle-sm toggle-secondary"
                        type="checkbox">
                    </label>
                  </div>
                </div>

                <!-- Clipboard Operations -->
                <div class="space-y-3">
                  <h3 class="text-xs font-bold text-base-content/40 uppercase tracking-wider">Clipboard Operations</h3>
                  <label
                    class="flex items-center justify-between p-4 bg-base-200 rounded-2xl cursor-pointer hover:bg-base-300 transition-colors">
                    <span class="font-medium">Enable clipboard notifications</span>
                    <input id="notificationClipboardToggle" class="toggle toggle-primary" type="checkbox">
                  </label>
                  <div id="notificationClipboardGroup" class="space-y-2 pl-4">
                    <label
                      class="flex items-center justify-between p-3 bg-base-200 rounded-xl cursor-pointer hover:bg-base-300 transition-colors">
                      <span>Successfully copied (title/URL/screenshot)</span>
                      <input id="notificationClipboardCopySuccessToggle" class="toggle toggle-sm toggle-secondary"
                        type="checkbox">
                    </label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Screenshot Settings Section -->
        <section class="section-content" data-section="screenshot-settings-heading" id="section-screenshot">
          <div class="animate-in">
            <div class="section-header">
              <h1 id="screenshot-settings-heading" class="section-title">Screenshot Settings</h1>
              <p class="section-description">Configure how screenshots are handled.</p>
            </div>

            <div class="options-card">
              <div class="flex items-center justify-between">
                <div class="flex items-center gap-5">
                  <div
                    class="w-14 h-14 bg-pink-100 dark:bg-pink-900/30 rounded-2xl flex items-center justify-center text-pink-600">
                    <svg class="w-7 h-7" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <rect width="18" height="18" x="3" y="3" rx="2" ry="2" />
                      <circle cx="9" cy="9" r="2" />
                      <path d="m21 15-3.08-3.08a2 2 0 0 0-2.83 0L6 21" />
                    </svg>
                  </div>
                  <div>
                    <h3 class="text-lg font-bold">Auto-save to Downloads</h3>
                    <p class="text-sm text-base-content/60 mt-1">When enabled, screenshots will be automatically saved
                      to your Downloads folder.</p>
                  </div>
                </div>
                <input id="screenshotAutoSaveToggle" type="checkbox" class="toggle toggle-primary" />
              </div>
            </div>
          </div>
        </section>

        <!-- Pinned Shortcuts Section -->
        <section class="section-content" data-section="pinned-shortcuts-heading" id="section-shortcuts">
          <div class="animate-in">
            <div class="section-header">
              <h1 id="pinned-shortcuts-heading" class="section-title">Pinned Shortcuts</h1>
              <p class="section-description">Customize the quick access buttons in your popup menu.</p>
            </div>

            <div class="options-card">
              <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div>
                  <div class="flex items-center justify-between mb-4">
                    <h3 class="text-xs font-bold text-base-content/40 uppercase tracking-wider">Active Shortcuts (Max 6)
                    </h3>
                    <button id="pinnedShortcutsResetButton" class="nenya-btn nenya-btn-ghost text-sm !px-3 !py-1"
                      type="button">Reset</button>
                  </div>
                  <div id="pinnedShortcutsList" class="space-y-3" role="list"></div>
                </div>
                <div>
                  <h3 class="text-xs font-bold text-base-content/40 uppercase tracking-wider mb-4">Available</h3>
                  <div id="pinnedShortcutsAvailableList" class="space-y-3" role="list"></div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Dark Mode Section -->
        <section class="section-content" data-section="dark-mode-heading" id="section-darkmode">
          <div class="animate-in">
            <div class="section-header">
              <h1 id="dark-mode-heading" class="section-title">Dark Mode</h1>
              <p class="section-description">Configure URL patterns for dark mode display.</p>
            </div>

            <div class="options-card mb-6">
              <form id="darkModeRuleForm" novalidate>
                <div class="flex gap-3 items-end">
                  <div class="flex-1">
                    <label class="form-label">URL Pattern</label>
                    <input id="darkModePatternInput" class="nenya-input font-mono text-sm" type="text"
                      autocomplete="off" placeholder="https://example.com/*" required>
                  </div>
                  <button id="darkModeSaveButton" class="nenya-btn nenya-btn-vibrant" type="submit">Add Rule</button>
                  <button id="darkModeCancelEditButton" class="nenya-btn nenya-btn-secondary" type="button"
                    hidden>Cancel</button>
                </div>
                <p class="text-sm text-base-content/40 mt-2">Uses browser URLPattern syntax (e.g. *://*.example.com/*)
                </p>
                <p id="darkModeFormError" class="text-sm text-error mt-2" hidden></p>
              </form>
            </div>

            <div class="options-card">
              <h3 class="text-xs font-bold text-base-content/40 uppercase tracking-wider mb-4">Saved Rules</h3>
              <div id="darkModeRulesEmpty" class="empty-state">No dark mode rules yet. Add one above to start.</div>
              <div id="darkModeRulesList" class="space-y-3" role="list"></div>
            </div>
          </div>
        </section>

        <!-- Bright Mode Section -->
        <section class="section-content" data-section="bright-mode-heading" id="section-brightmode">
          <div class="animate-in">
            <div class="section-header">
              <h1 id="bright-mode-heading" class="section-title">Bright Mode</h1>
              <p class="section-description">Configure URL patterns for bright mode display.</p>
            </div>

            <div class="options-card mb-6">
              <form id="brightModeWhitelistForm" novalidate>
                <div class="flex gap-3 items-end">
                  <div class="flex-1">
                    <label class="form-label">URL Pattern</label>
                    <input id="brightModeWhitelistPatternInput" class="nenya-input font-mono text-sm" type="text"
                      autocomplete="off" placeholder="https://example.com/*" required>
                  </div>
                  <button id="brightModeWhitelistSaveButton" class="nenya-btn nenya-btn-vibrant" type="submit">Add
                    Rule</button>
                  <button id="brightModeWhitelistCancelEditButton" class="nenya-btn nenya-btn-secondary" type="button"
                    hidden>Cancel</button>
                </div>
                <p class="text-sm text-base-content/40 mt-2">Uses browser URLPattern syntax (e.g. *://*.example.com/*)
                </p>
                <p id="brightModeWhitelistFormError" class="text-sm text-error mt-2" hidden></p>
              </form>
            </div>

            <div class="options-card">
              <h3 class="text-xs font-bold text-base-content/40 uppercase tracking-wider mb-4">Saved Rules</h3>
              <div id="brightModeWhitelistEmpty" class="empty-state">No bright mode rules yet. Add one above to start.
              </div>
              <div id="brightModeWhitelistList" class="space-y-3" role="list"></div>
            </div>
          </div>
        </section>

        <!-- Auto Reload Section -->
        <section class="section-content" data-section="auto-reload-heading" id="section-autoreload">
          <div class="animate-in">
            <div class="section-header">
              <h1 id="auto-reload-heading" class="section-title">Auto Reload Rules</h1>
              <p class="section-description">Reload matching tabs on a schedule without writing scripts.</p>
            </div>

            <div class="options-card mb-6">
              <form id="autoReloadRuleForm" novalidate>
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 items-end">
                  <div class="md:col-span-2">
                    <label class="form-label">URL Pattern</label>
                    <input id="autoReloadPatternInput" class="nenya-input font-mono text-sm" type="text"
                      autocomplete="off" placeholder="https://example.com/*" required>
                  </div>
                  <div>
                    <label class="form-label">Interval (Minutes)</label>
                    <input id="autoReloadIntervalInput" class="nenya-input" type="number" min="0.08" step="0.01"
                      required placeholder="5">
                  </div>
                  <button id="autoReloadSaveButton" class="nenya-btn nenya-btn-vibrant" type="submit">Add Rule</button>
                </div>
                <button id="autoReloadCancelEditButton" class="nenya-btn nenya-btn-secondary mt-3" type="button"
                  hidden>Cancel Edit</button>
                <p id="autoReloadFormError" class="text-sm text-error mt-2" hidden></p>
              </form>
            </div>

            <div class="options-card">
              <h3 class="text-xs font-bold text-base-content/40 uppercase tracking-wider mb-4">Active Reloaders</h3>
              <div id="autoReloadRulesEmpty" class="empty-state">No auto reload rules yet. Add one above to start.</div>
              <div id="autoReloadRulesList" class="space-y-3" role="list"></div>

              <div id="autoReloadRuleDetails" class="mt-6 pt-6 border-t border-base-300" hidden>
                <div class="flex items-center justify-between mb-4">
                  <h3 class="text-lg font-semibold">Rule Details</h3>
                  <span id="autoReloadRuleIntervalSummary" class="nenya-badge nenya-badge-green"></span>
                </div>
                <dl class="space-y-3 text-sm">
                  <div>
                    <dt class="form-label">Pattern</dt>
                    <dd id="autoReloadRulePatternDetail" class="font-mono"></dd>
                  </div>
                  <div class="grid grid-cols-2 gap-4">
                    <div>
                      <dt class="form-label">Created</dt>
                      <dd id="autoReloadRuleCreatedDetail"></dd>
                    </div>
                    <div>
                      <dt class="form-label">Last Updated</dt>
                      <dd id="autoReloadRuleUpdatedDetail"></dd>
                    </div>
                  </div>
                </dl>
              </div>
            </div>
          </div>
        </section>

        <!-- Highlight Text Section -->
        <section class="section-content" data-section="highlight-text-heading" id="section-highlight">
          <div class="animate-in">
            <div class="section-header">
              <h1 id="highlight-text-heading" class="section-title">Highlight Text</h1>
              <p class="section-description">Automatically highlight key information on specific pages.</p>
            </div>

            <div class="options-card mb-6">
              <form id="highlightTextRuleForm" class="space-y-4" novalidate>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div>
                    <label class="form-label">URL Pattern</label>
                    <input id="highlightTextPatternInput" class="nenya-input font-mono text-sm" type="text"
                      autocomplete="off" placeholder="https://example.com/*" required>
                  </div>
                  <div>
                    <label class="form-label">Type</label>
                    <select id="highlightTextTypeSelect" class="nenya-input" required>
                      <option value="whole-phrase">Whole phrase matches</option>
                      <option value="comma-separated">Comma separated words</option>
                      <option value="regex">Regular expression</option>
                    </select>
                  </div>
                </div>
                <div>
                  <label class="form-label">Value</label>
                  <textarea id="highlightTextValueInput" class="nenya-input font-mono text-sm resize-none"
                    placeholder="Enter text to highlight or regex pattern" rows="3" required></textarea>
                </div>
                <label class="flex items-center gap-3 p-3 bg-base-200 rounded-xl cursor-pointer">
                  <input id="highlightTextIgnoreCaseInput" class="checkbox checkbox-sm checkbox-primary"
                    type="checkbox">
                  <span class="text-sm">Ignore case when matching</span>
                </label>
                <div class="space-y-3">
                  <span class="form-label">Appearance</span>
                  <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div>
                      <label class="text-xs text-base-content/50 mb-2 block">Text color</label>
                      <div class="flex items-center gap-3">
                        <input id="highlightTextColorInput"
                          class="w-12 h-10 rounded-lg border border-base-300 cursor-pointer" type="color"
                          value="#000000">
                        <div class="flex-1 flex items-center gap-2">
                          <input id="highlightTextColorAlphaInput" class="range range-xs range-primary flex-1"
                            type="range" min="0" max="100" value="100">
                          <span id="highlightTextColorAlphaLabel"
                            class="text-xs text-base-content/50 w-10 text-right">100%</span>
                        </div>
                      </div>
                    </div>
                    <div>
                      <label class="text-xs text-base-content/50 mb-2 block">Background color</label>
                      <div class="flex items-center gap-3">
                        <input id="highlightTextBackgroundInput"
                          class="w-12 h-10 rounded-lg border border-base-300 cursor-pointer" type="color"
                          value="#ffff00">
                        <div class="flex-1 flex items-center gap-2">
                          <input id="highlightTextBackgroundAlphaInput" class="range range-xs range-primary flex-1"
                            type="range" min="0" max="100" value="100">
                          <span id="highlightTextBackgroundAlphaLabel"
                            class="text-xs text-base-content/50 w-10 text-right">100%</span>
                        </div>
                      </div>
                    </div>
                    <div>
                      <label class="text-xs text-base-content/50 mb-2 block">Text styling</label>
                      <div class="flex gap-3 mt-2">
                        <label class="flex items-center gap-2 cursor-pointer">
                          <input id="highlightTextBoldInput" class="checkbox checkbox-sm checkbox-primary"
                            type="checkbox">
                          <span class="text-sm font-bold">B</span>
                        </label>
                        <label class="flex items-center gap-2 cursor-pointer">
                          <input id="highlightTextItalicInput" class="checkbox checkbox-sm checkbox-primary"
                            type="checkbox">
                          <span class="text-sm italic">I</span>
                        </label>
                        <label class="flex items-center gap-2 cursor-pointer">
                          <input id="highlightTextUnderlineInput" class="checkbox checkbox-sm checkbox-primary"
                            type="checkbox">
                          <span class="text-sm underline">U</span>
                        </label>
                      </div>
                    </div>
                  </div>
                </div>
                <p id="highlightTextFormError" class="text-sm text-error" hidden></p>
                <div class="flex gap-3">
                  <button id="highlightTextSaveButton" class="nenya-btn nenya-btn-vibrant" type="submit">Add
                    Rule</button>
                  <button id="highlightTextCancelEditButton" class="nenya-btn nenya-btn-secondary" type="button"
                    hidden>Cancel</button>
                </div>
              </form>
            </div>

            <div class="options-card">
              <h3 class="text-xs font-bold text-base-content/40 uppercase tracking-wider mb-4">Saved Rules</h3>
              <div id="highlightTextRulesEmpty" class="empty-state">No highlight text rules yet. Add one above to start.
              </div>
              <div id="highlightTextRulesList" class="space-y-3" role="list"></div>

              <div id="highlightTextRuleDetails" class="mt-6 pt-6 border-t border-base-300" hidden>
                <div class="flex items-center justify-between mb-4">
                  <h3 class="text-lg font-semibold">Rule Details</h3>
                  <div class="flex gap-2 items-center">
                    <span id="highlightTextRuleTypeSummary" class="nenya-badge nenya-badge-blue"></span>
                    <div class="flex gap-1">
                      <div id="highlightTextRuleColorPreview" class="w-5 h-5 rounded border border-base-300"></div>
                      <div id="highlightTextRuleBackgroundPreview" class="w-5 h-5 rounded border border-base-300"></div>
                    </div>
                    <div id="highlightTextRuleStylePreview" class="flex gap-1 text-xs">
                      <span id="highlightTextRuleBoldPreview" class="hidden font-bold">B</span>
                      <span id="highlightTextRuleItalicPreview" class="hidden italic">I</span>
                      <span id="highlightTextRuleUnderlinePreview" class="hidden underline">U</span>
                    </div>
                  </div>
                </div>
                <dl class="space-y-3 text-sm">
                  <div>
                    <dt class="form-label">Pattern</dt>
                    <dd id="highlightTextRulePatternDetail" class="font-mono"></dd>
                  </div>
                  <div>
                    <dt class="form-label">Value</dt>
                    <dd id="highlightTextRuleValueDetail" class="font-mono"></dd>
                  </div>
                  <div>
                    <dt class="form-label">Ignore Case</dt>
                    <dd id="highlightTextRuleIgnoreCaseDetail"></dd>
                  </div>
                  <div class="grid grid-cols-2 gap-4">
                    <div>
                      <dt class="form-label">Created</dt>
                      <dd id="highlightTextRuleCreatedDetail"></dd>
                    </div>
                    <div>
                      <dt class="form-label">Last Updated</dt>
                      <dd id="highlightTextRuleUpdatedDetail"></dd>
                    </div>
                  </div>
                </dl>
              </div>
            </div>
          </div>
        </section>

        <!-- Video Enhancements Section -->
        <section class="section-content" data-section="video-enhancements-heading" id="section-video-enhancements">
          <div class="animate-in">
            <div class="section-header">
              <h1 id="video-enhancements-heading" class="section-title">Video Enhancements</h1>
              <p class="section-description">
                Automatically apply Nenya&#39;s video helpers on sites you trust. Start by saving a pattern for pages
                that should enter in-page fullscreen as soon as they load.
              </p>
            </div>

            <div class="options-card mb-6">
              <form id="videoEnhancementsForm" class="space-y-4" novalidate>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div>
                    <label class="form-label">URL Pattern</label>
                    <input id="videoEnhancementsPatternInput" class="nenya-input font-mono text-sm" type="text"
                      autocomplete="off" placeholder="https://example.com/watch/*" required>
                  </div>
                  <div>
                    <label class="form-label">Pattern Type</label>
                    <select id="videoEnhancementsPatternTypeSelect" class="nenya-input">
                      <option value="url-pattern">URLPattern (browser-native)</option>
                      <option value="wildcard">Wildcard (* matches anything)</option>
                    </select>
                  </div>
                </div>
                <div class="info-box">
                  <svg class="w-5 h-5 shrink-0" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round"
                      d="M13 16h-1v-4h-1m1-4h.01M12 2a10 10 0 1010 10A10 10 0 0012 2z" />
                  </svg>
                  <p class="text-sm">
                    URLPattern accepts full URLs like <code class="font-mono">https://*.example.com/*</code>. Wildcard
                    mode is a simple substring check where <code class="font-mono">*</code> expands to any characters.
                  </p>
                </div>
                <label class="flex items-center gap-3 p-3 bg-base-200 rounded-xl cursor-pointer">
                  <input id="videoEnhancementsAutoFullscreenInput" class="checkbox checkbox-sm checkbox-primary"
                    type="checkbox" checked>
                  <span class="text-sm">Auto enter in-page fullscreen when the pattern matches</span>
                </label>
                <p id="videoEnhancementsFormError" class="text-sm text-error" hidden></p>
                <div class="flex gap-3 flex-wrap">
                  <button id="videoEnhancementsSaveButton" class="nenya-btn nenya-btn-vibrant" type="submit">Add
                    rule</button>
                  <button id="videoEnhancementsCancelEditButton" class="nenya-btn nenya-btn-secondary" type="button"
                    hidden>Cancel</button>
                </div>
              </form>
            </div>

            <div class="options-card">
              <h3 class="text-xs font-bold text-base-content/40 uppercase tracking-wider mb-4">Saved Rules</h3>
              <div id="videoEnhancementsEmpty" class="empty-state">No video enhancement rules yet. Add one above to
                start.</div>
              <div id="videoEnhancementsList" class="space-y-3" role="list"></div>
            </div>
          </div>
        </section>

        <!-- Block Elements Section -->
        <section class="section-content" data-section="block-elements-heading" id="section-block">
          <div class="animate-in">
            <div class="section-header">
              <h1 id="block-elements-heading" class="section-title">Block Elements</h1>
              <p class="section-description">Manage CSS selectors to block specific elements on web pages.</p>
            </div>

            <div class="info-box mb-6">
              <svg class="w-5 h-5 shrink-0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2" />
              </svg>
              <p>Use the element picker from the extension popup to easily add new blocking rules while browsing.</p>
            </div>

            <div class="options-card">
              <h3 class="text-xs font-bold text-base-content/40 uppercase tracking-wider mb-4">Saved Rules</h3>
              <div id="blockElementsRulesEmpty" class="empty-state">No blocking rules yet. Use the element picker (üéØ
                button in popup) to create rules.</div>
              <div id="blockElementsRulesList" class="space-y-3" role="list"></div>

              <div id="blockElementsRuleDetails" class="mt-6 pt-6 border-t border-base-300" hidden>
                <div class="flex items-center justify-between mb-4">
                  <h3 class="text-lg font-semibold">Rule Details</h3>
                  <span id="blockElementsRuleSelectorCount" class="nenya-badge nenya-badge-violet"></span>
                </div>
                <dl class="space-y-4 text-sm">
                  <div>
                    <dt class="form-label">URL Pattern</dt>
                    <dd class="flex items-center gap-2">
                      <input id="blockElementsRulePatternInput" class="nenya-input font-mono text-sm" type="text"
                        autocomplete="off" />
                      <button id="blockElementsRulePatternSaveButton" class="nenya-btn nenya-btn-primary !py-2"
                        type="button" hidden>Save</button>
                      <button id="blockElementsRulePatternCancelButton" class="nenya-btn nenya-btn-secondary !py-2"
                        type="button" hidden>Cancel</button>
                    </dd>
                  </div>
                  <div>
                    <dt class="form-label">CSS Selectors</dt>
                    <dd class="space-y-3">
                      <div class="flex gap-2">
                        <input id="blockElementsRuleAddSelectorInput" class="nenya-input font-mono text-sm flex-1"
                          type="text" autocomplete="off" placeholder="Enter CSS selector (e.g., .ad-banner, #sidebar)">
                        <button id="blockElementsRuleAddSelectorButton" class="nenya-btn nenya-btn-vibrant !py-2"
                          type="button">Add</button>
                      </div>
                      <div id="blockElementsRuleSelectorsList" class="space-y-2"></div>
                    </dd>
                  </div>
                  <div class="grid grid-cols-2 gap-4">
                    <div>
                      <dt class="form-label">Created</dt>
                      <dd id="blockElementsRuleCreatedDetail"></dd>
                    </div>
                    <div>
                      <dt class="form-label">Last Updated</dt>
                      <dd id="blockElementsRuleUpdatedDetail"></dd>
                    </div>
                  </div>
                </dl>
                <div class="flex justify-end mt-4 pt-4 border-t border-base-300">
                  <button id="blockElementsRuleDeleteButton" class="nenya-btn nenya-btn-danger" type="button">Delete
                    Rule</button>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Custom JS CSS Section -->
        <section class="section-content" data-section="custom-code-heading" id="section-customcode">
          <div class="animate-in">
            <div class="section-header">
              <h1 id="custom-code-heading" class="section-title">Custom JS &amp; CSS</h1>
              <p class="section-description">Inject custom code into pages matching URL patterns.</p>
            </div>

            <div class="info-box mb-6">
              <svg class="w-5 h-5 shrink-0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10" />
                <path d="M12 16v-4" />
                <path d="M12 8h.01" />
              </svg>
              <p>Custom code rules are stored locally on this device. They're included in Raindrop backups and exports
                for syncing across devices.</p>
            </div>

            <div class="options-card mb-6">
              <form id="customCodeRuleForm" class="space-y-4" novalidate>
                <div>
                  <label class="form-label">URL Pattern</label>
                  <input id="customCodePatternInput" class="nenya-input font-mono text-sm" type="text"
                    autocomplete="off" placeholder="https://example.com/*" required>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div>
                    <label class="form-label">Custom CSS</label>
                    <div id="customCodeCSSInput" class="border border-base-300 rounded-xl overflow-hidden"
                      style="height: 300px;"></div>
                  </div>
                  <div>
                    <label class="form-label">Custom JavaScript</label>
                    <div id="customCodeJSInput" class="border border-base-300 rounded-xl overflow-hidden"
                      style="height: 300px;"></div>
                  </div>
                </div>
                <p id="customCodeFormError" class="text-sm text-error" hidden></p>
                <div class="flex gap-3">
                  <button id="customCodeSaveButton" class="nenya-btn nenya-btn-vibrant" type="submit">Add Rule</button>
                  <button id="customCodeCancelEditButton" class="nenya-btn nenya-btn-secondary" type="button"
                    hidden>Cancel</button>
                </div>
              </form>
            </div>

            <div class="options-card">
              <h3 class="text-xs font-bold text-base-content/40 uppercase tracking-wider mb-4">Saved Rules</h3>
              <div id="customCodeRulesEmpty" class="empty-state">No custom code rules yet. Add one above to start.</div>
              <div id="customCodeRulesList" class="space-y-3" role="list"></div>

              <div id="customCodeRuleDetails" class="mt-6 pt-6 border-t border-base-300" hidden>
                <h3 class="text-lg font-semibold mb-4">Rule Details</h3>
                <dl class="space-y-4 text-sm">
                  <div>
                    <dt class="form-label">Pattern</dt>
                    <dd id="customCodeRulePatternDetail" class="font-mono"></dd>
                  </div>
                  <div>
                    <dt class="form-label">CSS Code</dt>
                    <dd id="customCodeRuleCSSDetail"
                      class="font-mono text-xs whitespace-pre-wrap bg-base-300 p-3 rounded-lg max-h-40 overflow-auto">
                    </dd>
                  </div>
                  <div>
                    <dt class="form-label">JavaScript Code</dt>
                    <dd id="customCodeRuleJSDetail"
                      class="font-mono text-xs whitespace-pre-wrap bg-base-300 p-3 rounded-lg max-h-40 overflow-auto">
                    </dd>
                  </div>
                  <div class="grid grid-cols-2 gap-4">
                    <div>
                      <dt class="form-label">Created</dt>
                      <dd id="customCodeRuleCreatedDetail"></dd>
                    </div>
                    <div>
                      <dt class="form-label">Last Updated</dt>
                      <dd id="customCodeRuleUpdatedDetail"></dd>
                    </div>
                  </div>
                </dl>
              </div>
            </div>
          </div>
        </section>

        <!-- URL Process Rules Section -->
        <section class="section-content" data-section="url-process-rules-heading" id="section-urlprocess">
          <div class="animate-in">
            <div class="section-header">
              <h1 id="url-process-rules-heading" class="section-title">URL Process Rules</h1>
              <p class="section-description">Create rules to modify URL parameters and perform actions.</p>
            </div>

            <div class="options-card mb-6">
              <form id="urlProcessRuleForm" class="space-y-4" novalidate>
                <div>
                  <label class="form-label">Rule Name</label>
                  <input id="urlProcessRuleNameInput" class="nenya-input" type="text" autocomplete="off"
                    placeholder="E.g., Remove tracking parameters" required>
                </div>

                <div class="space-y-3">
                  <label class="form-label">URL Patterns</label>
                  <div class="flex gap-2">
                    <input id="urlProcessRuleAddPatternInput" class="nenya-input font-mono text-sm flex-1" type="text"
                      autocomplete="off" placeholder="https://example.com/*">
                    <button id="urlProcessRuleAddPatternButton" class="nenya-btn nenya-btn-secondary"
                      type="button">Add</button>
                  </div>
                  <div id="urlProcessRulePatternsList" class="space-y-2"></div>
                </div>

                <div class="space-y-3">
                  <label class="form-label">Processors</label>
                  <div class="flex gap-2 flex-wrap">
                    <select id="urlProcessRuleProcessorTypeSelect" class="nenya-input w-44">
                      <option value="add">Add search param</option>
                      <option value="replace">Replace param value</option>
                      <option value="remove">Remove param</option>
                    </select>
                    <input id="urlProcessRuleProcessorNameInput" class="nenya-input font-mono text-sm flex-1 min-w-32"
                      type="text" autocomplete="off" placeholder="Parameter name">
                    <input id="urlProcessRuleProcessorValueInput" class="nenya-input font-mono text-sm flex-1 min-w-32"
                      type="text" autocomplete="off" placeholder="Value">
                    <button id="urlProcessRuleAddProcessorButton" class="nenya-btn nenya-btn-secondary"
                      type="button">Add</button>
                  </div>
                  <div id="urlProcessRuleProcessorsList" class="space-y-2"></div>
                </div>

                <div class="space-y-3">
                  <label class="form-label">When to Apply</label>
                  <div class="space-y-2">
                    <label
                      class="flex items-center gap-3 p-3 bg-base-200 rounded-xl cursor-pointer hover:bg-base-300 transition-colors">
                      <input id="urlProcessRuleApplyWhenCopy" class="checkbox checkbox-sm checkbox-primary"
                        type="checkbox">
                      <span>Copy to clipboard</span>
                    </label>
                    <label
                      class="flex items-center gap-3 p-3 bg-base-200 rounded-xl cursor-pointer hover:bg-base-300 transition-colors">
                      <input id="urlProcessRuleApplyWhenRaindrop" class="checkbox checkbox-sm checkbox-primary"
                        type="checkbox">
                      <span>Save to Raindrop</span>
                    </label>
                  </div>
                </div>

                <p id="urlProcessRuleFormError" class="text-sm text-error" hidden></p>
                <div class="flex gap-3">
                  <button id="urlProcessRuleSaveButton" class="nenya-btn nenya-btn-vibrant" type="submit">Add
                    Rule</button>
                  <button id="urlProcessRuleCancelEditButton" class="nenya-btn nenya-btn-secondary" type="button"
                    hidden>Cancel</button>
                </div>
              </form>
            </div>

            <div class="options-card">
              <h3 class="text-xs font-bold text-base-content/40 uppercase tracking-wider mb-4">Saved Rules</h3>
              <div id="urlProcessRulesEmpty" class="empty-state">No URL process rules yet. Add one above to start.</div>
              <div id="urlProcessRulesList" class="space-y-3" role="list"></div>

              <div id="urlProcessRuleDetails" class="mt-6 pt-6 border-t border-base-300" hidden>
                <h3 class="text-lg font-semibold mb-4">Rule Details</h3>
                <dl class="space-y-4 text-sm">
                  <div>
                    <dt class="form-label">Name</dt>
                    <dd id="urlProcessRuleDetailName" class="font-medium"></dd>
                  </div>
                  <div>
                    <dt class="form-label">URL Patterns</dt>
                    <dd id="urlProcessRuleDetailPatterns" class="space-y-1"></dd>
                  </div>
                  <div>
                    <dt class="form-label">Processors</dt>
                    <dd id="urlProcessRuleDetailProcessors" class="space-y-1"></dd>
                  </div>
                  <div>
                    <dt class="form-label">When to Apply</dt>
                    <dd id="urlProcessRuleDetailApplyWhen" class="space-y-1"></dd>
                  </div>
                  <div class="grid grid-cols-2 gap-4">
                    <div>
                      <dt class="form-label">Created</dt>
                      <dd id="urlProcessRuleDetailCreated"></dd>
                    </div>
                    <div>
                      <dt class="form-label">Last Updated</dt>
                      <dd id="urlProcessRuleDetailUpdated"></dd>
                    </div>
                  </div>
                </dl>
              </div>
            </div>
          </div>
        </section>

        <!-- Auto Google Login Section -->
        <section class="section-content" data-section="auto-google-login-heading" id="section-autologin">
          <div class="animate-in">
            <div class="section-header">
              <h1 id="auto-google-login-heading" class="section-title">Auto Google Login</h1>
              <p class="section-description">Configure patterns for automatic Google account selection.</p>
            </div>

            <div class="options-card mb-6">
              <form id="autoGoogleLoginRuleForm" class="space-y-4" novalidate>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div>
                    <label class="form-label">URL Pattern</label>
                    <input id="autoGoogleLoginPatternInput" class="nenya-input font-mono text-sm" type="text"
                      autocomplete="off" placeholder="https://example.com/*" required>
                  </div>
                  <div>
                    <label class="form-label">Google Email (Optional)</label>
                    <input id="autoGoogleLoginEmailInput" class="nenya-input" type="email" autocomplete="off"
                      placeholder="user@example.com">
                  </div>
                </div>
                <p id="autoGoogleLoginFormError" class="text-sm text-error" hidden></p>
                <div class="flex gap-3">
                  <button id="autoGoogleLoginSaveButton" class="nenya-btn nenya-btn-vibrant" type="submit">Add
                    Rule</button>
                  <button id="autoGoogleLoginCancelEditButton" class="nenya-btn nenya-btn-secondary" type="button"
                    hidden>Cancel</button>
                </div>
              </form>
            </div>

            <div class="options-card">
              <h3 class="text-xs font-bold text-base-content/40 uppercase tracking-wider mb-4">Saved Rules</h3>
              <div id="autoGoogleLoginRulesEmpty" class="empty-state">No auto Google login rules yet. Add one above to
                start.</div>
              <div id="autoGoogleLoginRulesList" class="space-y-3" role="list"></div>

              <div id="autoGoogleLoginRuleDetails" class="mt-6 pt-6 border-t border-base-300" hidden>
                <h3 class="text-lg font-semibold mb-4">Rule Details</h3>
                <dl class="space-y-4 text-sm">
                  <div>
                    <dt class="form-label">Pattern</dt>
                    <dd id="autoGoogleLoginRulePatternDetail" class="font-mono"></dd>
                  </div>
                  <div>
                    <dt class="form-label">Google Account Email</dt>
                    <dd id="autoGoogleLoginRuleEmailDetail"></dd>
                  </div>
                  <div class="grid grid-cols-2 gap-4">
                    <div>
                      <dt class="form-label">Created</dt>
                      <dd id="autoGoogleLoginRuleCreatedDetail"></dd>
                    </div>
                    <div>
                      <dt class="form-label">Last Updated</dt>
                      <dd id="autoGoogleLoginRuleUpdatedDetail"></dd>
                    </div>
                  </div>
                </dl>
              </div>
            </div>
          </div>
        </section>

        <!-- LLM Prompts Section -->
        <section class="section-content" data-section="llm-prompts-heading" id="section-llm">
          <div class="animate-in">
            <div class="section-header">
              <h1 id="llm-prompts-heading" class="section-title">LLM Saved Prompts</h1>
              <p class="section-description">Manage saved prompts for Large Language Models.</p>
            </div>

            <div class="options-card mb-6">
              <form id="llmPromptForm" class="space-y-4" novalidate>
                <div>
                  <label class="form-label">Prompt Name</label>
                  <input id="llmPromptNameInput" class="nenya-input" type="text" autocomplete="off"
                    placeholder="E.g., Code Review Assistant" required>
                </div>
                <div>
                  <label class="form-label">Prompt Text</label>
                  <textarea id="llmPromptTextInput" class="nenya-input resize-none"
                    placeholder="Enter your prompt text here..." rows="6" required></textarea>
                </div>
                <p id="llmPromptFormError" class="text-sm text-error" hidden></p>
                <div class="flex gap-3">
                  <button id="llmPromptSaveButton" class="nenya-btn nenya-btn-vibrant" type="submit">Save
                    Prompt</button>
                  <button id="llmPromptCancelEditButton" class="nenya-btn nenya-btn-secondary" type="button"
                    hidden>Cancel</button>
                </div>
              </form>
            </div>

            <div class="options-card">
              <h3 class="text-xs font-bold text-base-content/40 uppercase tracking-wider mb-4">Saved Prompts</h3>
              <div id="llmPromptsEmpty" class="empty-state">No saved prompts yet. Add one above to start.</div>
              <div id="llmPromptsList" class="grid grid-cols-1 md:grid-cols-2 gap-4" role="list"></div>

              <div id="llmPromptDetails" class="mt-6 pt-6 border-t border-base-300" hidden>
                <h3 class="text-lg font-semibold mb-4">Prompt Details</h3>
                <dl class="space-y-4 text-sm">
                  <div>
                    <dt class="form-label">Name</dt>
                    <dd id="llmPromptDetailName" class="font-medium"></dd>
                  </div>
                  <div>
                    <dt class="form-label">Prompt</dt>
                    <dd id="llmPromptDetailText"
                      class="whitespace-pre-wrap bg-base-300 p-3 rounded-lg max-h-60 overflow-auto"></dd>
                  </div>
                  <div class="grid grid-cols-2 gap-4">
                    <div>
                      <dt class="form-label">Created</dt>
                      <dd id="llmPromptDetailCreated"></dd>
                    </div>
                    <div>
                      <dt class="form-label">Last Updated</dt>
                      <dd id="llmPromptDetailUpdated"></dd>
                    </div>
                  </div>
                </dl>
                <div class="flex justify-between mt-4 pt-4 border-t border-base-300">
                  <button id="llmPromptEditButton" class="nenya-btn nenya-btn-primary" type="button">Edit</button>
                  <button id="llmPromptDeleteButton" class="nenya-btn nenya-btn-danger" type="button">Delete</button>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Debug Section -->
        <section class="section-content" data-section="debug-heading" id="section-debug">
          <div class="animate-in">
            <div class="section-header">
              <h1 id="debug-heading" class="section-title">Debug</h1>
              <p class="section-description">Development and debugging utilities.</p>
            </div>

            <div class="options-card">
              <div class="flex items-center gap-4 mb-6">
                <div class="w-12 h-12 bg-base-200 rounded-xl flex items-center justify-center">
                  <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect width="16" height="16" x="4" y="4" rx="2" />
                    <path d="M12 8h.01" />
                    <path d="M16 4v16" />
                    <path d="M4 16h16" />
                  </svg>
                </div>
                <div>
                  <h3 class="text-lg font-bold">Tab Operations</h3>
                  <p class="text-sm text-base-content/60">Tools for managing tabs across all windows.</p>
                </div>
              </div>
              <button id="debugReloadAllTabsButton" class="nenya-btn nenya-btn-primary" type="button">
                <svg class="w-4 h-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                  stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M23 4v6h-6" />
                  <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10" />
                </svg>
                Reload All Tabs
              </button>
              <div id="debugOperationStatus" class="text-sm text-base-content/60 mt-4" role="status" aria-live="polite">
              </div>
            </div>
          </div>
        </section>

      </div>
    </main>
  </div>

  <div id="optionsBackupFloatingBar" class="options-floating-bar">
    <div class="options-floating-status" id="optionsBackupFloatingStatus">
      Manual backup keeps your settings safe in Raindrop. Connect your account to enable backup and restore.
    </div>
    <div class="options-floating-actions">
      <button id="optionsFloatingBackupButton" class="nenya-btn nenya-btn-secondary floating-btn" type="button">üì§ Backup</button>
      <button id="optionsFloatingRestoreButton" class="nenya-btn nenya-btn-secondary floating-btn" type="button">üì• Restore</button>
      <button id="optionsFloatingExportButton" class="nenya-btn nenya-btn-ghost floating-btn" type="button">üì¶ Export</button>
      <button id="optionsFloatingImportButton" class="nenya-btn nenya-btn-ghost floating-btn" type="button">üìÅ Import</button>
      <input id="optionsFloatingImportFileInput" type="file" accept="application/json" class="hidden" />
    </div>
  </div>

  <script src="./options.js" type="module"></script>
</body>

</html>